<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}"> <!-- Link to the stylesheet -->

    <!-- included the Font Awesome library used for sidebar toggle right arrow -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
<!-- Include JavaScript for popup -->
<!-- JavaScript for SweetAlert2 (Pop-up) -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script type="text/javascript">
    // Check if the user was redirected after saving data
    {% if messages %}
        {% for message in messages %}
            // Display SweetAlert2 pop-up message
            Swal.fire({
                title: 'Success!',
                text: '{{ message }}',
                icon: 'success',
                confirmButtonText: 'Okay'
            });
        {% endfor %}
    {% endif %}
</script>




</head>


<body>
    <!-- Header Section -->
    <header>
        <!-- Title with padding -->
        <div class="title">
            <img src="{% static 'images/logo1.png' %}" alt="Logo" class="logo">
            <h2>Users</h2>
        </div>
    
        <!-- Profile and Logout section on the right side -->
        <div class="profile-logout">
            <!-- Profile and Dropdown -->
            <div class="profile">
                <!-- Profile image now triggers the dropdown -->
                <img src="{% static 'images/profile.png' %}" alt="Profile" class="profile-logo">
                <div class="dropdown">
                    <div class="dropdown-content">
                        <a href="#">
                            <i class="fa fa-cogs"></i> Settings
                        </a>
                        <a href="#">
                            <i class="fa fa-user"></i> Profile
                        </a>
                        <form action="{% url 'logout' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="logout-button">
                                <i class="fa fa-sign-out-alt"></i> Log Out
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </header>
    


<!-- Sidebar Section -->
<div class="sidebar">
    <!-- Toggle Button for Expanding/Collapsing Sidebar -->
    <div class="sidebar-toggle-btn">
        <button class="toggle-btn"><i class="fas fa-arrow-right"></i></button> <!-- Right Arrow to expand -->
    </div>

    <!-- Sidebar Menu -->
    <ul class="sidebar-menu">
        <li><a href="{% url 'dashboard' %}" class="sidebar-link">
            <img src="{% static 'images/sidebar11.png' %}" alt="Dashboard" class="sidebar-icon"> <!-- Dashboard icon -->
            <span class="link-text">Dashboard</span>
        </a></li>
        <li><a href="#" class="sidebar-link">
            <img src="{% static 'images/sidebar14.png' %}" alt="Clients" class="sidebar-icon"> <!-- Settings icon -->
            <span class="link-text">Clients</span>
        </a></li>
        <li><a href="{% url 'user_creation' %}" class="sidebar-link">
            <img src="{% static 'images/sidebar33.png' %}" alt="Users" class="sidebar-icon"> <!-- Customers icon -->
            <span class="link-text">Users</span>
        </a></li>
        <li><a href="#" class="sidebar-link">
            <img src="{% static 'images/sidebar15.png' %}" alt="Tickets" class="sidebar-icon"> <!-- Settings icon -->
            <span class="link-text">Tickets</span>
        </a></li>
        <li><a href="#" class="sidebar-link">
            <img src="{% static 'images/sidebar16.png' %}" alt="VoIP" class="sidebar-icon"> <!-- Settings icon -->
            <span class="link-text">VoIP</span>
        </a></li>
        <li><a href="{% url 'billing' %}" class="sidebar-link">
            <img src="{% static 'images/sidebar12.png' %}" alt="Billing" class="sidebar-icon"> <!-- Reports icon -->
            <span class="link-text">Billing</span>
        </a></li>
    </ul>
</div>


    <!-- Main Content Section -->
    <main class="content1">
        
<!-- start Create New User Section-->
<!-- start Create New User Section-->
<div class="createuser-container">
    <h2>Create New User</h2>
    <div class="column1">
        <button class="save-btn1" onclick="window.location.href='/dashboard/usercreation/'">Create New User</button>
    </div>

    <!-- User Creation Form -->
    <form method="POST" class="user-info-form1">
        {% csrf_token %}

        <!-- First Column -->
        <div class="column1">
            <div class="form-row1">
                <label for="{{ form.user_name.id_for_label }}">User name</label>
                {{ form.user_name }}
                {% if form.user_name.errors %}
                    <div class="error-message">
                        {% for error in form.user_name.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.full_name.id_for_label }}">Full name</label>
                {{ form.full_name }}
                {% if form.full_name.errors %}
                    <div class="error-message">
                        {% for error in form.full_name.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.phone_no.id_for_label }}">Phone no</label>
                {{ form.phone_no }}
                {% if form.phone_no.errors %}
                    <div class="error-message">
                        {% for error in form.phone_no.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.email.id_for_label }}">Email</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="error-message">
                        {% for error in form.email.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.node.id_for_label }}">Node</label>
                {{ form.node }}
                {% if form.node.errors %}
                    <div class="error-message">
                        {% for error in form.node.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Second Column -->
        <div class="column1">
            <div class="form-row1">
                <label for="{{ form.branch.id_for_label }}">Branch</label>
                {{ form.branch }}
                {% if form.branch.errors %}
                    <div class="error-message">
                        {% for error in form.branch.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.ext_no.id_for_label }}">Ext No</label>
                {{ form.ext_no }}
                {% if form.ext_no.errors %}
                    <div class="error-message">
                        {% for error in form.ext_no.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Displaying form field and errors for port_ip -->
            <div class="form-row1">
                <label for="{{ form.port_ip.id_for_label }}">Port IP</label>
                {{ form.port_ip }}
                {% if form.port_ip.errors %}
                    <div class="error-message">
                        {% for error in form.port_ip.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-row1">
                <label for="{{ form.password.id_for_label }}">Password</label>
                {{ form.password }}
                {% if form.password.errors %}
                    <div class="error-message">
                        {% for error in form.password.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.power_broker_id.id_for_label }}">Power Broker ID</label>
                {{ form.power_broker_id }}
                {% if form.power_broker_id.errors %}
                    <div class="error-message">
                        {% for error in form.power_broker_id.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Third Column -->
        <div class="column">
            <div class="form-row1">
                <label for="{{ form.applied_rating_id.id_for_label }}">Applied Rating ID</label>
                {{ form.applied_rating_id }}
                {% if form.applied_rating_id.errors %}
                    <div class="error-message">
                        {% for error in form.applied_rating_id.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.user_creation_date.id_for_label }}">Creation Date</label>
                {{ form.user_creation_date }}
                {% if form.user_creation_date.errors %}
                    <div class="error-message">
                        {% for error in form.user_creation_date.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.suspended_date.id_for_label }}">Suspended Date</label>
                {{ form.suspended_date }}
                {% if form.suspended_date.errors %}
                    <div class="error-message">
                        {% for error in form.suspended_date.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-row1">
                <label for="{{ form.status.id_for_label }}">Status</label>
                {{ form.status }}
                {% if form.status.errors %}
                    <div class="error-message">
                        {% for error in form.status.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Save Details Button -->
            <div class="form-row1">
                <button type="submit" class="save-btn1">Save Details</button>
            </div>
        </div>
    </form>
</div>
<!-- End of Create New User Section-->

<!-- End of Create New User Section-->

    </main>



<!-- Footer Section -->
    <footer>
        <div class="footer-content">
            <p>Tech Office Inc</p>
            <p>1332 Khalsa Drive, Unit# 10, Mississauga, ON L5S 0A2</p>
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="footer-logo">
        </div>
    </footer>

<!-- JavaScript for toggling sidebar -->
<script>
    // Get the elements
    const toggleBtn = document.querySelector('.sidebar-toggle-btn');
    const sidebar = document.querySelector('.sidebar');

    // Add an event listener to toggle the sidebar when the button is clicked
    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
    });

    // Optional: Auto-expand the sidebar on hover by adding and removing the 'collapsed' class
    sidebar.addEventListener('mouseenter', () => {
        if (sidebar.classList.contains('collapsed')) {
            sidebar.classList.remove('collapsed');
        }
    });

    sidebar.addEventListener('mouseleave', () => {
        if (!sidebar.classList.contains('collapsed')) {
            sidebar.classList.add('collapsed');
        }
    });
</script>




</body>
</html>
